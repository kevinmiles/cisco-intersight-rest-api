# Step 2: Use a Postman collection to interact with Intersight

## Create an Intersight environment in Postman
We're almost reaady to use the imported Intersight REST API Postman collection. To make Intersight REST API calls via Postman, you'll need to create a *Postman Environment* and populate two environment variables.

### Create a Postman environment for Intersight
1. Click the **Eye** icon in the upper-right of the Postman interface.
1. Click **Add** in the upper-right of the **Environment** section.
1. Enter `Intersight` in the **Environment Name** field.

  ![](assets/images/image-13.jpg)<br/><br/>

### Create Environment Variables for your REST API Keys

1. Enter the variable name `api-key-id` in the **VARIABLE** field.
1. Enter your API key ID in the **INITIAL VALUE** field. The API key ID is found under **Settings-->API Keys** in the Intersight interface.
1. Enter the variable name `secret-key` in the **VARIABLE** field.
1. Enter the entire contents of the `SecretKey.txt` file in the **INITIAL VALUE** field. The `SecretKey.txt` file is located in the `C:\Users\administrator\Downloads` directory. This file was downloaded when you created the API keys in Intersight.
1. CLick the **Add** button to create and save the environment.

   ![](assets/images/image-14.jpg)<br/><br/>

1. CLick the **X** in the upper-right of the **MANAGE ENVIRONMENTS** dialog.

### View the Intersight REST API Environment and open the Postman console

1. Select the Intersight environment by clicking the **No Environment** drop-down in the upper-right and selecting the **Intersight** environment.

   ![](assets/images/image-15.jpg)

2. View the Intersight environment variables by clicking the **Eye** icon in the upper-right.

   ![](assets/images/image-16.jpg)

   All of the Intersight requests send output to the Postman Console.

3. Open the Postman console by clicking clicking **Show Postman Console** from the **View** menu. 

   ![](assets/images/image-17.jpg)
  
   ![](assets/images/image-18.jpg)

With the Intersight Postman environment created and the Postman console open you can now run the Intersight REST API requests and view call results.

### Intersight REST API Requests

##### Make a GET Request
1. Run the GET request for GET Compute / PhysicalSummaries

  - ***Click*** the **GET** request labeled `GET Compute / PhysicalSummaries`<br/><br/>

  Notice the request Uri

  - `https://intersight.com/api/v1/compute/PhysicalSummaries`<br/><br/>

  The **GET** request is a query of the `compute/PhysicalSummaries` Intersight resource. The response is a JSON encoded listing of every Intersight managed compute resource in your account.

  - ***Click*** the "SEND" button<br/><br/>

2. View the results in the Postman Interface and the Postman Console.

  - You can scroll through the results and view the `Moid` Managed Object ID for each compute resource. As well you can view a variety of attributes for each compute resource in your account.<br/><br/>

  ![](assets/images/image-19.jpg)<br/><br/>

  - The Postman Console was populated by both the Collection "Tests" and the GET request "Tests". View the JavaScript in the "Tests" to see how the individual resource attributes were accessed.<br/><br/>

  ![](assets/images/image-20.jpg)<br/><br/>

3. Run the GET request for GET NTP Policies

  - ***Click*** the **GET** request labeled `GET NTP Policies`<br/><br/>

Notice the request Uri

  - `https://intersight.com/api/v1/ntp/Policies`<br/><br/>

  The **GET** request is a query of the `ntp/Policies` Intersight resource. The response is a JSON encoded listing of every Intersight managed NTP Policy resource in your account.

  - ***Click*** the "SEND" button<br/><br/>

  The results of this query is a JSON encoded list of all the NTP Policies in your Intersight account, if any. If there are not any NTP Policies the the JSON encoded response is a null "Results" list.

  ![](assets/images/image-21.jpg)<br/><br/>

  Also be sure to look at the "Collection Tests" that were run as part of the GET request.

#### Make a POST Request
1. Run the POST request for POST NTP Policy

  - ***Click*** the **POST** request labeled `POST NTP Policy`<br/><br/>

  Notice the request Uri

  - `https://intersight.com/api/v1/ntp/Policies`<br/><br/>

  The **POST** Uri is the same as the **GET** Uri for NTP Policies, however because it is a POST request a new NTP Policy will be created, if an NTP Policy of the same name does not already exist.

  The Body of the POST request describes the new NTP Policy.

  - ***Click*** the "SEND" button<br/><br/>

  The new NTP Policy named `ntp-policy` has been created in your Intersight account. A JSON encoded representation of the NTP Policy Managed Object is returned in the POST request response.

  ![](assets/images/image-22.jpg)<br/><br/>

  To view this new NTP Policy in Intersight

  - ***Navigate*** to "Policies-->Server Policies"
  - ***Click*** on the policy name `ntp-policy`<br/><br/>

  ![](assets/images/image-23.jpg)<br/><br/>
  ![](assets/images/image-24.jpg)<br/><br/>

#### Make a PATCH Request
1. Run the PATCH request for UPDATE NTP Policy

  - ***Click*** the **PATCH** request labeled `UPDATE NTP Policy`<br/><br/>

  Notice the request Uri

  - `https://intersight.com/api/v1/ntp/Policies/{{ntp-policy}}`<br/><br/>

  The **PATCH** Uri has a Postman variable appended to the end of the Uri. The variable `{{ntp-policy}}` was set by the post-request "Tests" in the POST request that created the NTP Policy.

  The variable `{{ntp-policy}}` was set to the `Moid`, Managed Object ID of the created NTP Policy.  The `Moid` is appended to the end of the Uri to indicate the specific Uri that the **PATCH** request should update.

  The Pre-request script in the Postman Collection is responsible for updating the **PATCH** Uri with the `Moid` stored in the `{{ntp-policy}}` variable.

  The Body of the PATCH request describes the updates to be made to the NTP Policy with the specified `Moid`.

  - ***Click*** the "SEND" button<br/><br/>

  The existing NTP Policy named ntp-policy has been updated in your Intersight account. A JSON encoded representation of the updated NTP Policy Managed Object is returned in the PATCH request response.

  ![](assets/images/image-25.jpg)<br/><br/>

  To view the updated NTP Policy in Intersight

  - ***Navigate*** to "Policies-->Server Policies"
  - ***Click*** on the policy name `ntp-policy`<br/><br/>

  ![](assets/images/image-23.jpg)<br/><br/>
  ![](assets/images/image-26.jpg)<br/><br/>

#### Make a DELETE Request
1. Run the DELETE request to DELETE the NTP Policy

  - ***Click*** the **DELETE** request labeled `DELETE NTP Policy`<br/><br/>

  Notice the request Uri

  - `https://intersight.com/api/v1/ntp/Policies/{{ntp-policy}}`<br/><br/>

  The **DELETE** Uri is the same at the **PATCH** it has the Postman variable `{{ntp-policy}}` appended to the end.

  The Pre-request script in the Postman Collection is responsible for updating the **DELETE** Uri with the `Moid` stored in the `{{ntp-policy}}` variable.

  There is no Body for the DELETE request.

  - ***Click*** the "SEND" button<br/><br/>

  The existing NTP Policy named ntp-policy has been deleted from your Intersight account. The only indication the the request was successful is the `200OK` status code.

  ![](assets/images/image-27.jpg)<br/><br/>

  To verify that the NTP Policy named `ntp-policy` is no longer in Intersight

  - ***Navigate*** to "Policies-->Server Policies"<br/><br/>

  ![](assets/images/image-28.jpg)<br/><br/>

You have run through all the HTTP Method operations available via the Intersight REST API that allow you to Query, Create, Update and Delete Intersight Managed Objects. There are many Policies available in Intersight, with new capabilities being adde regularly.

Next Step: Removing Claimed UCS Devices from Intersight
